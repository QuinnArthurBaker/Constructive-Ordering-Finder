\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{tikz}
\usepackage{rotating}
\def\checkmark{\tikz\fill[scale=0.4](0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle;} 
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\ZnZ}{\ZZ/n\ZZ}
\newcommand{\FZ}{F_{\preceq}\left(\ZZ/n\ZZ\right)}
\newtheorem{conjecture}{Conjecture}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{claim}{Claim}
\setlength{\tabcolsep}{4pt}
\title{Introduction to Factorial Subsets}
\author{Zack Baker }
\date{June 2017}


\begin{document}

\maketitle

\section{Introduction}

A \textit{group} $G$ is a set of elements together with a binary operation $\cdot$ such that the following properties hold:
\begin{enumerate}
\item \textbf{Closure} of the set under the binary operation: For any $a,b\in G$, $a\cdot b$ is also an element of $G$.
\item \textbf{Associativity:} for any $a,b,c\in G$, $(a\cdot b)\cdot c = a\cdot(b\cdot c)$.
\item There exists an \textbf{identity} element $e \in G$ such that for all $a\in G$, $a\cdot e = e\cdot a = a$.
\item Each element $a\in G$ has an \textbf{inverse} $b\in G$ such that $a\cdot b=b\cdot a = e$.
\end{enumerate}

When the binary operation is understood, and we are working in a multiplicative group, we will often use concatenation in place of writing the binary operation between two elements. For example, if we want to represent $a\cdot b$ for $a,b\in G$ we may simply write $ab$.

Group theory aims to understand the relations between elements of a group. This paper aims to further analyze the relationship between elements of a group by extending the concept of the factorial from the integers to any group.

For $n$ a non-negative integer, the \textit{factorial} of $n$, written $n!$ is defined as $n\times (n-1) \times \ldots \times 2 \times 1$, with the special case $0!=1$. Thus, $1! = 1$, $2!=2\times 1 = 2$, $3! = 3\times 2 \times 1 = 6$, and so on. We seek to extend the factorial by imposing an ordering on the underlying set of the group.




\section{Definitions}
Let $G$ be a finite group under the binary operator $\oplus$. To begin, we must define a binary relation $\preceq$ on $G$, where $\preceq$ is a total ordering. If the group's underlying set is numeric, and if $\preceq$ is the same as the standard $\leq$ ordering on the set, then we call $\preceq$ the \textit{natural ordering} for $G$. 


We define the factorial of $g_k$, $g_k! = \bigoplus_{i=0}^{k} g_i = g_0 \oplus g_1 \oplus g_2 \oplus \ldots \oplus g_k$, where $g_0\preceq g_1\preceq g_2 \preceq \ldots \preceq g_{k-1} \preceq g_k$ and there are no elements $g\in G\setminus\{g_0,...,,g_k\}$ such that $g_0\preceq g\preceq g_k$.
\begin{definition}
Given a group $G$ with some total ordering $\preceq$, we define the \textit{factorial subset} of $G$, denoted $F_\preceq(G)$, as $\{g! | g \in G\}$. In other words, the factorial subset of a group is the set of the factorials of each of that group's elements. If $F_\preceq(G)$ is a subgroup of $G$, then we say it is a \textit{factorial subgroup} of $G$. 
\end{definition}


The first property we are going to discuss is the following lemma, which is useful both in the immediate discussion and in the next sections as well

\begin{lemma}\label{first_element_id} Let $G$ be a finite group and $\preceq$ be any total ordering on $G$. If $F_\preceq(G) = G$ then the smallest element under $\preceq$ must be the identity.
\end{lemma}

\begin{proof} This proof is by contradiction. If the identity, denoted $e$, were not the first element under the ordering $\preceq$  then there exists an element $g\in G$ immediately preceding $e$ in the ordering. Then clearly $g!=e!$, so there will be fewer than $|G|$ elements in $F_\preceq(G)$ so they cannot possibly be equal.

\end{proof}



\textbf{Example:} The Klein 4-group is a small, common group suitable for demonstrating the concepts established above. The Klein 4-group is defined as $\{e,a,b,c\}$, where $e$ is the identity, $a^2 = b^2 = c^2 = e$, $ab = c$, $ac = b$, and
$bc = a$. Define $\preceq$ such that $e\preceq a \preceq b \preceq c$. Then, $e! = e$, $a! = ea = a$, $b! = eab$ = $ab = c$, and $c! = eabc$ = $cc$ = $e$. Then, the factorial subset of the Klein 4-group, $F_\preceq(V_4)$, is $\{e!,a!,b!,c!\}$, or $\{e,a,c\}$. Since the factorial subset has 3 elements and $V_4$ has 4, clearly the subset is not a subgroup of $V_4$. In fact:
\begin{theorem}
For any ordering $\preceq$, $F_\preceq(V_4)$ is not a subgroup of $V_4$.
\end{theorem}
\begin{proof}
Let $x,y,z,w$ be distinct elements of $V_4$, where $x\preceq y \preceq z \preceq w$. Then, $F_\preceq(V_4) = \{x!,y!,z!,w!\}$. Then, $w! = e\cdot a\cdot b\cdot c = e$. We will show that some element is always duplicated in $F_\preceq(V_4)$. We have 4 cases:
\begin{itemize}
    \item[Case 1:] Let $x=e$. Then, $x! = e$, $y! = y$, $z! = y\cdot z = w$, and $w! = e$. Thus, only $e$ is duplicated. 
    \item[Case 2:] Let $y=e$. Then, $x!=x$, $y! = x!\cdot e = x$, and $z! = x\cdot z = y$. Thus, only $x$ is duplicated
    \item[Case 3:] Let $z=e$. Then, $x!=x$, $y!= x\cdot y = w$, and $z! = y!\cdot z = w\cdot e= w$. Thus, only $w$ is duplicated.
    \item[Case 4:] Let $w=e$. Then, $x!=x$, $y! = y\cdot x = z$,  $z! = z\cdot z = e$, and $w! = z! \cdot w = e\cdot e = e$. Thus, only $e$ is duplicated.
\end{itemize}
Therefore, in all cases, $F_\preceq(V_4) = \{e,x,y\}$, where $x,y$ are distinct elements of $V_4$. 
\end{proof}

\section{Factorial Subsets of the Additive Group of Integers modulo $n$}
In this section, we will specifically examine the factorial subsets and subgroups of the additive group of integers modulo $n$, $\mathbb{Z}/n\mathbb{Z}$. 
\subsection{Factorial Subgroups of $\ZnZ$ with the Natural Ordering}
Let $\ZnZ$ be the additive group of integers modulo $n$, and let $\ZnZ$ be ordered by the natural ordering, $\leq$.  The following table describes $F_\leq(\ZnZ)$ for small $n$. \\ \\

\begin{tabular}{|c|c|c|}
\hline
$n$ & $F_\leq(\ZZ/n\ZZ)$ & \textbf{Is $F_\leq(\ZZ/n\ZZ)$ a subgroup of $\ZZ/n\ZZ$?}\\
\hline
2 &$\{0,1\}$ & \checkmark \\
\hline
3 &\{0,1\} & \textbf{X}\\
\hline
4 &\{0,1,2,3\} & \checkmark \\
\hline
5 &\{0,1,3\} & \textbf{X} \\
\hline
6 & \{0,1,3,4\}& \textbf{X}\\
\hline
7 & \{0,1,3,6\}& \textbf{X} \\
\hline
8 &\{0,1,2,3,4,5,6,7\} & \checkmark \\
\hline
9 &\{0,1,3,6\} &\textbf{X} \\
\hline
10 &\{0,1,3,5,6,8\} & \textbf{X} \\

\hline

\end{tabular} \vspace{0.1in}
\\As we can see, $F_\leq(\ZZ/n\ZZ)$ is only a subgroup of $\ZZ/n\ZZ$ if $n$ is 2, 4 or 8, $n\leq 10$. Continuing these calculations up to $n=10000$, $F_\leq(\ZZ/n\ZZ)$ is only a subgroup if $n = 2^k$, for some positive integer $k$, and for all $n=2^k$, $F_\leq(\ZZ/n\ZZ) = \ZZ/n\ZZ$
\begin{conjecture}
For $\leq$ the natural ordering, $F_\leq(\ZZ/n\ZZ)$ is equivalent to $\ZZ/n\ZZ$ if and only if $n=2^k$ for some positive integer $k$. 
\end{conjecture}

\subsection{All Factorial Subgroups of $\ZZ/n\ZZ$}
In the previous section we examined a single ordering for many values of $n$. Conversely in this section, we will look at all orderings for few $n$. We ask for some $n$, how many orderings of $\ZZ/n\ZZ$ produce factorial subgroups? Since there are $n!$ ways of ordering $n$ elements, there will be many different orderings to check. The following table describes the number of factorial subgroups produced by $\ZZ/n\ZZ$

\begin{tabular}{|c|c|}
\hline
$n$ & Number of orderings for which $F_\preceq(\ZZ/n\ZZ)$ is a subgroup of $\ZZ/n\ZZ$\\
\hline
2 & 1\\
\hline
3 & 0\\
\hline
4 & 2\\
\hline
5 & 0\\
\hline
6 & 4\\
\hline
7 & 0\\
\hline
8 & 24\\
\hline
9 & 0\\
\hline
10 & 288\\
\hline
11 & 0\\
\hline
12 & 3856\\
\hline
\end{tabular} \vspace{0.1in}
\\Curiously, taking the non-zero entries as a sequence replicates the known integer sequence A141599.
\par Since for $\ZnZ$ there are $n!$ possible orderings, this quickly makes computation impossible for larger values of $n$. There are several observations which reduce the total number of orderings needed to check.
\begin{theorem}
$\FZ$ is a subgroup of $\ZnZ$ if and only if $\FZ$ = $\ZnZ$
\end{theorem}

\begin{proof} This proof is by contradiction. Assume that there exists a proper factorial subgroup of $\ZnZ$, $\FZ$. Then $\FZ=< \negmedspace m \negmedspace >$ for some nontrivial divisor $m$ of $n$. Then every element of $\FZ$ is a multiple of $m$. Let $(g_0,g_1,...,g_{n-1})$ be the ordering of the elements of $\ZnZ$ under $\preceq$. For some $i\in\{0,...,n-1\}$, $g_i=1$. If $i=0$ then $g_i!=1\not\in < \negmedspace m \negmedspace >$, so assume $i>0$. Then, either $g_{i-1}!$ or $g_i!$ will not be in $\FZ$, since they differ by 1 and thus cannot both be multiples of $m$. Thus, there are no proper factorial subgroups of $\ZnZ$ for any $n\in\mathbb{Z}^+$. 
\end{proof}


\begin{lemma}\label{oddlemma}
For any $n$, if $0$ is not the smallest element in $\ZnZ$, then $\FZ \neq \ZnZ$. 
\end{lemma}
\begin{proof}
This will be a proof by contradiction. Assume there exists some element $g$ directly preceding 0. Then, $0! = g! + 0 = g!$. Since $g!$ is repeated, the size of $\FZ$ must be smaller than $\ZnZ$, so $\FZ \neq \ZnZ$. 
\end{proof}
\begin{lemma}
If $n$ is odd, $\FZ \neq \ZnZ$. 
\end{lemma}
\begin{proof}
Let $g$ be the largest element of $\ZnZ$. Then, $g! = \sum_{k=0}^{n-1} k = T_{n-1} \equiv T_n - n \equiv T_n \pmod{n}$, where $T_n$ is the $n$th triangular number. If $n$ is odd, then $T_n \pmod{n}$ is 0. The triangular numbers are defined as $T_n = \sum_{i=0}^{n} = 0 + 1 + 2 + \ldots + n-1 + n$. If $n$ is odd, the middle terms of this sum are $\ldots + \frac{n-1}{2} + \frac{n+1}{2} + \ldots$. In $\ZnZ$, each element can be paired with its inverse, as there are an even number of terms in the sum, excluding 0. Thus, $T_n \pmod{n} \equiv 0$ for odd $n$. Then, 0 is duplicated in $\FZ$, so $\FZ \neq \ZnZ$.
\end{proof} 
\begin{lemma}
For even $n$, $n>2$, $\frac{n}{2}$ cannot be the greatest element.
\end{lemma}
\begin{proof}
This will be a proof by contradiction. Assume $\frac{n}{2}$ is the greatest element of $\ZnZ$. Then, since the factorial of the largest element of $\ZnZ$ is $T_n$, $\frac{n}{2}! = T_n$. For even $n$, $T_n = \frac{n}{2}$. The $n$th triangular number is defined as $0 + 1 + 2 + \ldots (n-1) + n$. For even $n$, the middle terms of this sum are $\ldots + \frac{n}{2}-1 + \frac{n}{2} + \frac{n}{2}+1 + \ldots$. Every element in this sum can be paired with its inverse, except for $\frac{n}{2}$. Thus, the sum equals $\frac{n}{2}$. Since $T_n = \frac{n}{2}$, $\frac{n}{2}! = \frac{n}{2}$. Let $g$ directly precede $\frac{n}{2}$. Then, $g! = \frac{n}{2}! - \frac{n}{2} = \frac{n}{2}-\frac{n}{2} = 0$. Thus, 0 is duplicated, so $\FZ \neq \ZnZ$. 
\end{proof}
\begin{lemma}
For even $n$, $\frac{n}{2}$ cannot be the second smallest element.
\end{lemma}
\begin{proof}
If $\frac{n}{2}$ is the second least element, then $\frac{n}{2}! = 0 + \frac{n}{2} = \frac{n}{2}$. However, we know by Lemma 2 that the factorial of the greatest element of $\ZnZ$ is $\frac{n}{2}$. Thus, if the second least element is $\frac{n}{2}$, then $\frac{n}{2}$ is duplicated, so $\FZ \neq \ZnZ$.
\end{proof}
\begin{lemma}
If $o_1 = (0, g_1, g_2, \ldots )$ is a valid ordering, $0<g_1,g_2<\frac{n}{2}$, then $o_2 = (0,g_2, g_1, \ldots)$ is not a valid ordering
\end{lemma}
\begin{proof}
The first few elements of $F_{o_1}(\ZnZ)$ are $\{0,g_1!, g_2!\ldots\} = \{0,g_1,g_1+g_2\ldots\}$. When the positions of $g_2$ and $g_1$ are interchanged in the ordering, resulting in $F_{o_2}(\ZnZ)$, the factorial set becomes $\{0,g_2!,g_1!,\ldots\} = \{0,g_2,g_1+g_2,\ldots\}$. As the rest of the ordering is unchanged, and since $g_2!$ in $o_1$ equals $g_1!$ in $o_2$, the only difference is $g_2$ in $F_{o_2}(\ZnZ)$. Since we know $o_1$ is a valid ordering, we know $F_{o_1}(\ZnZ)$ must equal $\ZnZ$. Therefore, $g_2$ must occur somewhere in $F_{o_1}(\ZnZ)$. Therefore, since $F_{o_1}(\ZnZ)$ equals $F_{o_2}(\ZnZ)$ outside of $g_2$ at the beginning of $F_{o_2}(\ZnZ)$, $g_2$ must also occur in the same position as it does in $F_{o_1}(\ZnZ)$. Therefore, $g_2$ repeats in $F_{o_2}(\ZnZ)$, and therefore cannot be a valid ordering.
\end{proof}


Furthermore, experimental evidence sheds more light on restrictions. Table 3 shows the result of frequency analysis performed on valid orderings of $\ZnZ$

\begin{center}

\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
 &1 & 2 & 3 & 4 & 5 & 6 &7&8&9&10&11 \\
 \hline
  1 &   382& 356& 424& 384& 382& 0& 382& 384& 424& 356& 382\\
 2 &   348& 290& 396& 370& 348& 352& 348& 370& 396& 290& 348\\
 3 &   354& 400& 284& 316& 354& 440& 354& 316& 284& 400& 354\\
 4 &   346& 334& 340& 358& 346& 408& 346& 358& 340& 334& 346\\
 5 &   336& 388& 340& 308& 336& 440& 336& 308& 340& 388& 336\\
 6 &   324& 320& 288& 384& 324& 576& 324& 384& 288& 320& 324\\
 7 &   336& 388& 340& 308& 336& 440& 336& 308& 340& 388& 336\\
 8 &   346& 334& 340& 358& 346& 408& 346& 358& 340& 334& 346\\
 9 &  354& 400& 284& 316& 354& 440& 354& 316& 284& 400& 354\\
 10 & 348& 290& 396& 370& 348& 352& 348& 370& 396& 290& 348\\
 11&  382& 356& 424& 384& 382& 0& 382& 384& 424& 356& 382\\
 \hline
\end{tabular}

\end{center}

From this table, we see that for any value $i$, $0<i<n$, there are the same number of $i$'s and $(12-i)$'s in the $i$th and $(n-i)$th position, respectively. This symmetry allows us to make the following two observations:
\begin{lemma}
If $(0,g_1,g_2,\ldots,g_n)$ is a valid ordering, then its inverse, $(0, n-g_1, n-g_2, \ldots, n-g_n)$ is also a valid ordering
\end{lemma}
\begin{proof}
The inverse of an element $g_i$, $n-g_i$, can also be written as $-g_i\pmod{n}$. Then, -$g_i! = -(g_i + g_{i-1} + g_{i-2} + \ldots + g_1)$. Thus the original factorial subset is reproduced, but negated. 
\end{proof}
\begin{lemma}
If $(0, g_1, g_2, \ldots, g_n)$ is a valid ordering, then $(0, g_n, g_{n-1}, g_{n-2}, \ldots, g_1)$ is also a valid ordering.
\end{lemma}
\begin{proof}
Let $o_1 = (0,g_1, g_2, \ldots, g_{n-1})$ and $o_2 = (0, g_{n-1}, g_{n-2}, \ldots, g_1)$. Then, $g_1!_{o_2}$ = $\frac{n}{2} = \frac{n}{2} - 0!_{o_1}$. Likewise, $g_2!_{o_2} = \frac{n}{2}-g_1!_{o_1}$. In general, $g_i!_{o_2} = \frac{n}{2} - g_{i-1}!_{o_1}$. Thus, the original factorial subset is reconstructed from this definition, negated and shifted by $\frac{n}{2}$.  
\end{proof}
%These two observations together reduce runtime by an upper factor of 4.

\section{Description of the Algorithm}

In this section we describe the steps of our algorithm which creates the following output from the specified input:

\noindent\textbf{Input:} This algorithm requires a positive, even integer as input. It does not accept odd integers since factorial subgroups do not exist for $\ZnZ$ when $n$ is odd, by Lemma \ref{oddlemma}.

\noindent\textbf{Output:} The total number of number of factorial subgroups of $\ZnZ$, under all possible orderings on this set.

All possible orderings of $\ZnZ-\{0\}$ are calculated. These orderings are then iterated through. Each element of the ordering is added together mod $n$. If any of the resulting sums have already been produced or if any of the sums produced equal 0, the ordering is discarded, as it will be impossible to reproduce all of $\ZnZ$. If the ordering hasn't been discarded once all elements have been added together, it will reproduce $\ZnZ$.

\section{Future Work}
Further evaluation of the number of factorial subsets of $\ZnZ$ for different values of $n$ and the restrictions on the valid subsets will be investigated. We will also look into how our findings are linked to the integer sequence A141599. Ideally, we hope to find a function for any $n$ which fully encompasses the number of orderings such that $\FZ = \ZnZ$. As well, we will expand our scope from groups of integers mod $n$ to other, non-numeric groups, and investigate the relationship, if any, between potentially valid orderings and cyclic vs. non-cyclic groups.
\end{document}
